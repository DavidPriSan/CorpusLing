var M=Math.PI/3,F=[0,M,2*M,3*M,4*M,5*M];function G(e){return e[0]}function H(e){return e[1]}function J(){var e=0,d=0,x=1,p=1,j=G,y=H,s,o,g;function r(n){var u={},c=[],t,a=n.length;for(t=0;t<a;++t)if(!(isNaN(l=+j.call(null,h=n[t],t,n))||isNaN(f=+y.call(null,h,t,n)))){var h,l,f,i=Math.round(f=f/g),m=Math.round(l=l/o-(i&1)/2),z=f-i;if(Math.abs(z)*3>1){var b=l-m,A=m+(l<m?-1:1)/2,B=i+(f<i?-1:1),C=l-A,D=f-B;b*b+z*z>C*C+D*D&&(m=A+(i&1?1:-1)/2,i=B)}var E=m+"-"+i,v=u[E];v?v.push(h):(c.push(v=u[E]=[h]),v.x=(m+(i&1)/2)*o,v.y=i*g)}return c}function I(n){var u=0,c=0;return F.map(function(t){var a=Math.sin(t)*n,h=-Math.cos(t)*n,l=a-u,f=h-c;return u=a,c=h,[l,f]})}return r.hexagon=function(n){return"m"+I(n==null?s:+n).join("l")+"z"},r.centers=function(){for(var n=[],u=Math.round(d/g),c=Math.round(e/o),t=u*g;t<p+s;t+=g,++u)for(var a=c*o+(u&1)*o/2;a<x+o/2;a+=o)n.push([a,t]);return n},r.mesh=function(){var n=I(s).slice(0,4).join("l");return r.centers().map(function(u){return"M"+u+"m"+n}).join("")},r.x=function(n){return arguments.length?(j=n,r):j},r.y=function(n){return arguments.length?(y=n,r):y},r.radius=function(n){return arguments.length?(s=+n,o=s*2*Math.sin(M),g=s*1.5,r):s},r.size=function(n){return arguments.length?(e=d=0,x=+n[0],p=+n[1],r):[x-e,p-d]},r.extent=function(n){return arguments.length?(e=+n[0][0],d=+n[0][1],x=+n[1][0],p=+n[1][1],r):[[e,d],[x,p]]},r.radius(1)}export{J as hexbin};
