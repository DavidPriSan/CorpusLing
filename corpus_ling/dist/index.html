<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>CorpusLing</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,alt,wide.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,alt,wide.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="modulepreload" href="./_node/d3-hexbin@0.2.2/index.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/_esm.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/_esm.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/_esm.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.js";
import {registerFile} from "./_observablehq/stdlib.js";

registerFile("./TSV.png", {"name":"./TSV.png","mimeType":"image/png","path":"./_file/TSV.8cae6cc5.png","lastModified":1721814809529});

define({id: "9b7a985f", inputs: ["Inputs","Generators"], outputs: ["pasosInput","pasos"], body: (Inputs,Generators) => {
const pasosInput = Inputs.button(
  [
    ["1: Carga de datos", (value) => 1],
    ["2: Verificación", (value) => 2],
    ["3: Visualización", (value) => 3]
  ],
  { value: 0 }
);
const pasos = Generators.input(pasosInput);
return {pasosInput,pasos};
}});

define({id: "00afe3dd", inline: true, inputs: ["pasosInput","display"], body: async (pasosInput,display) => {
display(await(
pasosInput
))
}});

define({id: "294defac", inputs: ["pasos"], outputs: ["paso1Div","paso2Div","paso3Div"], body: (pasos) => {
const paso1Div = document.getElementById("paso1");
const paso2Div = document.getElementById("paso2");
const paso3Div = document.getElementById("paso3");

if (pasos == 0) { // Sin seleccionar paso
  paso1Div.hidden = true;
  paso2Div.hidden = true;
  paso3Div.hidden = true;
} else if (pasos == 1) { // Paso 1 (Carga de datos)
  paso1Div.hidden = false;
  paso2Div.hidden = true;
  paso3Div.hidden = true;
} else if (pasos == 2) { // Paso 2 (Verificación)
  paso1Div.hidden = true;
  paso2Div.hidden = false;
  paso3Div.hidden = true;
} else if (pasos == 3) { // Paso 3 (Visualización)
  paso1Div.hidden = true;
  paso2Div.hidden = true;
  paso3Div.hidden = false;
}
return {paso1Div,paso2Div,paso3Div};
}});

define({id: "01e02363", inputs: ["FileAttachment"], outputs: ["TSVpng"], body: (FileAttachment) => {
// Imagenes
const TSVpng = FileAttachment("./TSV.png").image({ width: 64 });
return {TSVpng};
}});

define({id: "8680e008", inputs: ["Inputs","TSVpng","Generators"], outputs: ["cargaInput","carga"], body: (Inputs,TSVpng,Generators) => {
// Botonera
const cargaInput = Inputs.button(
  [
    [TSVpng, (value) => 1]
  ], 
  { value: 0 }
);
const carga = Generators.input(cargaInput);
return {cargaInput,carga};
}});

define({id: "b72ab29d", inputs: ["Inputs","Generators"], outputs: ["archivoTSVInput","archivoTSV"], body: (Inputs,Generators) => {
// Input TSV
const archivoTSVInput = Inputs.file({
  label: "Archivo TSV",
  accept: ".tsv,.csv,.json",
  required: true,
  width: 310,
});
const archivoTSV = Generators.input(archivoTSVInput);
return {archivoTSVInput,archivoTSV};
}});

define({id: "dbeaed21", inline: true, inputs: ["cargaInput","display"], body: async (cargaInput,display) => {
display(await(
cargaInput
))
}});

define({id: "f08ed483", inline: true, inputs: ["archivoTSVInput","display"], body: async (archivoTSVInput,display) => {
display(await(
archivoTSVInput
))
}});

define({id: "14165f7b", inputs: ["carga"], outputs: ["cargaDiv","TSVDiv","muestraTSVDiv"], body: (carga) => {
const cargaDiv = document.getElementById("carga");
const TSVDiv = document.getElementById("TSV");
const muestraTSVDiv = document.getElementById("muestraTSV");

if (carga == 0) { // Sin seleccionar modo
  cargaDiv.innerHTML = "<p>Puedes elegir como quieres cargar tus datos pulsando los distintos botones de arriba.</p>";
  TSVDiv.hidden = true;
  muestraTSVDiv.hidden = true;
} else if (carga == 1) { // Examinar TSV
  cargaDiv.innerHTML = "<p>Examina el archivo de tu equipo haciendo click en el botón de abajo, el archivo puede ser TSV, CSV(siendo la primera línea del mismo los encabezados de las columnas en ambos casos) o JSON.</p><br>";
  TSVDiv.hidden = false;
  muestraTSVDiv.hidden = false;
}
return {cargaDiv,TSVDiv,muestraTSVDiv};
}});

define({id: "7af89e89", inputs: ["archivoTSV"], outputs: ["arch","archivo"], body: (archivoTSV) => {
// Parseo TSV
var arch;
if (archivoTSV.name.split('.')[1] == 'tsv'){
  var arch = archivoTSV.tsv();
} else if (archivoTSV.name.split('.')[1] == 'csv'){
  var arch = archivoTSV.csv( {typed: true} );
} else if (archivoTSV.name.split('.')[1] == 'json'){
  var arch = archivoTSV.json();
}
const archivo = arch;
return {arch,archivo};
}});

define({id: "31b3dab5", inputs: ["muestraTSV","archivo"], outputs: ["keys"], body: (muestraTSV,archivo) => {
muestraTSV.innerHTML = JSON.stringify(archivo);
const keys = Object.keys(archivo[0]);
return {keys};
}});

define({id: "a084e6f6", inputs: ["keys","archivo"], outputs: ["keysTypes"], body: (keys,archivo) => {
const keysTypes = [];
keys.forEach((item, i) => {
  if(isNaN(archivo[0][item])) { // Texto
    keysTypes[i] = 'text';
  } else { // Número
    keysTypes[i] = 'number';
  }
});
return {keysTypes};
}});

define({id: "84f1f889", inline: true, inputs: ["selectorVfInput","display"], body: async (selectorVfInput,display) => {
display(await(
selectorVfInput
))
}});

define({id: "4a179013", inline: true, inputs: ["selectorADInput","display"], body: async (selectorADInput,display) => {
display(await(
selectorADInput
))
}});

define({id: "bbefc0f9", inline: true, inputs: ["selectorColInput","display"], body: async (selectorColInput,display) => {
display(await(
selectorColInput
))
}});

define({id: "9e8ae319", inline: true, inputs: ["nombreColInput","display"], body: async (nombreColInput,display) => {
display(await(
nombreColInput
))
}});

define({id: "0352ef6d", inputs: ["keys","keysTypes","selectorVf","selectorAD","archivo","structuredClone"], outputs: ["container","textoVf","editColVf","tablaAnt","table","thead","tr"], body: (keys,keysTypes,selectorVf,selectorAD,archivo,structuredClone) => {
// Tabla verificación
const container = document.getElementById('tablaVf');
const textoVf = document.getElementById('textoVf');
const editColVf = document.getElementById('editColVf');

// Borra tabla anterior (si existe)
let tablaAnt = document.getElementById('tablaVer');
if (tablaAnt != null) {
  tablaAnt.remove();
}

let table = document.createElement('table');
table.setAttribute('id', 'tablaVer');
let thead = document.createElement('thead');
let tr = document.createElement('tr');

// Encabezados
keys.forEach((item, i) => {
  let th = document.createElement('th');
  th.innerText = item;

  // Color
  if(keysTypes[i] == 'text') {
    th.style.color = 'seagreen';
  } else if(keysTypes[i] == 'number') {
    th.style.color = 'royalblue';
  }

  // Editar columna
  /*th.onclick = function() {
    // Checkea si ya está clickada
    if (this.hasAttribute('data-clicked')) {
      return;
    }
    
    this.setAttribute('data-clicked', 'yes');
    this.setAttribute('data-text', this.innerText);
    textoVf.hidden = true;
    editColVf.hidden = false;
    selectorColInput.value = keysTypes[i];
    nombreColInput.placeholder = this.innerText;
    nombreColInput.value = this.innerText;

    // Input
    var input = document.createElement('input');
    input.setAttribute('type', 'button');
    input.value = 'Confirmar';
    input.style.width = '100px';
    input.style.height = '50px';
    input.style.border = '5px';
    input.style.fontFamily = 'inherit';
    input.style.fontSize = 'inherit';
    input.style.textAlign = 'inherit';

    input.onclick = function() {
      var orig_text = th.getAttribute('data-text');
      var curr_text = nombreColInput.value;

      if (orig_text != curr_text) { // Hay cambios
        th.removeAttribute('data-clicked');
        th.removeAttribute('data-text');

        // Modificar key
        var new_item = structuredClone(item);
        new_item = curr_text;
        //keys[keys.indexOf(item)] = new_item;
        keysTypes[i] = selectorColInput.value;

        // Modificar key en cada objeto
        archivo.forEach( (obj) => {
          delete Object.assign(obj, {[curr_text]: obj[orig_text] })[orig_text];
        });

        // Modificar celda
        th.innerText = curr_text;
        item = new_item;
        th.style.cssText = 'padding: 5px';
      } else { // No hay cambios
        th.removeAttribute('data-clicked');
        th.removeAttribute('data-text');

        // Modificar key
        keysTypes[i] = selectorColInput.value;

        // Modificar celda
        th.innerText = orig_text;
        th.style.cssText = 'padding: 5px';
      }

      // Color
      if(keysTypes[i] == 'text') { // Texto
        th.style.color = 'seagreen';
      } else if(keysTypes[i] == 'number') { // Número
        th.style.color = 'royalblue';
      }

      textoVf.hidden = false;
      editColVf.hidden = true;
      editColVf.removeChild(input);
    }

    editColVf.append(input);
    editColVf.lastElementChild.select();
  }*/

  tr.appendChild(th);
});
thead.appendChild(tr);
table.append(tr);

// Ordenar conjunto
if ((keysTypes[keys.indexOf(selectorVf)] === 'text') && (selectorAD === 'Ascendente')) {
  archivo.sort((a,b) => (a[selectorVf] > b[selectorVf]) ? 1 : ((b[selectorVf] > a[selectorVf]) ? -1 : 0));
} else if ((keysTypes[keys.indexOf(selectorVf)] === 'text') && (selectorAD === 'Descendente')) {
  archivo.sort((a,b) => (a[selectorVf] < b[selectorVf]) ? 1 : ((b[selectorVf] < a[selectorVf]) ? -1 : 0));
} else if ((keysTypes[keys.indexOf(selectorVf)] === 'number') && (selectorAD === 'Ascendente')){
  archivo.sort((a,b) => a[selectorVf] - b[selectorVf]);
} else if ((keysTypes[keys.indexOf(selectorVf)] === 'number') && (selectorAD === 'Descendente')){
  archivo.sort((a,b) => b[selectorVf] - a[selectorVf]);
}

// Datos
archivo.forEach((item) => {
  let tr = document.createElement('tr');
  let vals = Object.values(item);

  vals.forEach((elem, i) => {
    let td = document.createElement('td');
    td.innerText = elem;
    // Color
    if(isNaN(elem) && (keysTypes[i] === 'text')) { // Texto
      td.style.color = 'seagreen';
    } else if (!isNaN(elem) && (keysTypes[i] === 'number')){ // Número
      td.style.color = 'royalblue';
    } else { // Error
      td.style.color = 'darkred';
      td.style.backgroundColor = 'lightpink';
    }

    // Celda editable
    td.onclick = function() {
      // Checkea si ya está clickada
      if (this.hasAttribute('data-clicked')) {
        return;
      }

      this.setAttribute('data-clicked', 'yes');
      this.setAttribute('data-text', this.innerText);

      // Input
      var input = document.createElement('input');
      input.setAttribute('type', 'text');
      input.value = this.innerText;
      input.style.width = (this.offsetWidth - 5) + 'px';
      input.style.height = (this.offsetHeight - 5) + 'px';
      input.style.border = '0px';
      input.style.fontFamily = 'inherit';
      input.style.fontSize = 'inherit';
      input.style.textAlign = 'inherit';
      input.style.backgroundColor = 'LightGoldenRodYellow';

      input.onblur = function() {
        var orig_text = td.getAttribute('data-text');
        var curr_text = this.value;

        if (orig_text != curr_text) { // Hay cambios
          td.removeAttribute('data-clicked');
          td.removeAttribute('data-text');

          // Modificar objeto
          var new_item = structuredClone(item);
          new_item[keys[i]] = curr_text;
          archivo[archivo.indexOf(item)] = new_item;

          // Modificar celda
          td.innerText = curr_text;
          item = new_item;
          td.style.cssText = 'padding: 5px';
        } else { // No hay cambios
          td.removeAttribute('data-clicked');
          td.removeAttribute('data-text');

          // Modificar celda
          td.innerText = orig_text;
          td.style.cssText = 'padding: 5px';
        }

        // Color
        if(isNaN(curr_text) && (keysTypes[i] === 'text')) { // Texto
          td.style.color = 'seagreen';
        } else if (!isNaN(curr_text) && (keysTypes[i] === 'number')){ // Número
          td.style.color = 'royalblue';
        } else { // Error
          td.style.color = 'darkred';
          td.style.backgroundColor = 'lightpink';
        }
      }

      // Guardar cambios con tecla Enter
      input.onkeypress = function(e) {
        if (e.keyCode == 13) {
          this.blur();
        }
      }

      this.innerText = '';
      this.style.cssText = 'padding: 0px 0px';
      this.append(input);
      this.firstElementChild.select();
    }

    tr.appendChild(td);
  });
  table.appendChild(tr);
});
container.appendChild(table);
return {container,textoVf,editColVf,tablaAnt,table,thead,tr};
}});

define({id: "e358c8f3", inputs: ["Inputs","keys","Generators"], outputs: ["selectorVfInput","selectorVf","selectorADInput","selectorAD","selectorColInput","selectorCol","nombreColInput","nombreCol"], body: (Inputs,keys,Generators) => {
// Selector columna
const selectorVfInput = Inputs.select(keys, {label: "Ordenar por"});
const selectorVf = Generators.input(selectorVfInput);

// Selector asc/desc
const selectorADInput = Inputs.select(["Ascendente", "Descendente"]);
const selectorAD = Generators.input(selectorADInput);

// Selector tipo columna
const selectorColInput = Inputs.select(["number", "text"], {label: "Tipo"});
const selectorCol = Generators.input(selectorColInput);

// Input columna
const nombreColInput = Inputs.text({
  label: "Nombre"
});
const nombreCol = Generators.input(nombreColInput);
return {selectorVfInput,selectorVf,selectorADInput,selectorAD,selectorColInput,selectorCol,nombreColInput,nombreCol};
}});

define({id: "84ae4f69", inline: true, inputs: ["graphInput","display"], body: async (graphInput,display) => {
display(await(
graphInput
))
}});

define({id: "3a01cff3", inline: true, inputs: ["selectorIdInput","display"], body: async (selectorIdInput,display) => {
display(await(
selectorIdInput
))
}});

define({id: "742f3895", inline: true, inputs: ["selectorVsInput","display"], body: async (selectorVsInput,display) => {
display(await(
selectorVsInput
))
}});

define({id: "a5c43da8", inline: true, inputs: ["limitVsInput","display"], body: async (limitVsInput,display) => {
display(await(
limitVsInput
))
}});

define({id: "271693ac", inline: true, inputs: ["ordenarVsInput","display"], body: async (ordenarVsInput,display) => {
display(await(
ordenarVsInput
))
}});

define({id: "59d44c5b", inline: true, inputs: ["selectorRadioInput","display"], body: async (selectorRadioInput,display) => {
display(await(
selectorRadioInput
))
}});

define({id: "5e9b754b", inline: true, inputs: ["limitSbInput","display"], body: async (limitSbInput,display) => {
display(await(
limitSbInput
))
}});

define({id: "539d631a", body: () => {
// Imagenes

}});

define({id: "bb43cb29", inputs: ["Inputs","Generators"], outputs: ["graphInput","graph"], body: (Inputs,Generators) => {
// Botonera gráficos
const graphInput = Inputs.button(
  [
    ["Gráfico de barras", (value) => 1],
    ["Diagrama de sectores", (value) => 2],
    ["Hexbin", (value) => 3],
    ["Zoomable sunburst", (value) => 4]
  ],
  { value: 0 }
);
const graph = Generators.input(graphInput);
return {graphInput,graph};
}});

define({id: "4f515976", inputs: ["graph"], outputs: ["graphBarrasDiv","graphSectorDiv","graphSunburstDiv","graphButtonsDiv","graphButtonsLimitsDiv","sunburstButtonsDiv","graphHexbinDiv","hexbinButtonsDiv"], body: (graph) => {
const graphBarrasDiv = document.getElementById("graphBarras");
const graphSectorDiv = document.getElementById("graphSector");
const graphSunburstDiv = document.getElementById("graphSunburst");
const graphButtonsDiv = document.getElementById("graphButtons");
const graphButtonsLimitsDiv = document.getElementById("graphButtonsLimits");
const sunburstButtonsDiv = document.getElementById("sunburstButtons");
const graphHexbinDiv = document.getElementById("graphHexbin");
const hexbinButtonsDiv = document.getElementById("hexbinButtons");

if (graph == 0) { // Sin seleccionar gráfico
  graphBarrasDiv.hidden = true;
  graphSectorDiv.hidden = true;
  graphSunburstDiv.hidden = true;
  graphButtonsDiv.hidden = true;
  graphButtonsLimitsDiv.hidden = true;
  sunburstButtonsDiv.hidden = true;
  graphHexbinDiv.hidden = true;
  hexbinButtonsDiv.hidden = true;
} else if (graph == 1) { // Barras
  graphBarrasDiv.hidden = false;
  graphSectorDiv.hidden = true;
  graphSunburstDiv.hidden = true;
  graphButtonsDiv.hidden = false;
  graphButtonsLimitsDiv.hidden = false;
  sunburstButtonsDiv.hidden = true;
  graphHexbinDiv.hidden = true;
  hexbinButtonsDiv.hidden = true;
} else if (graph == 2) { // Sectores
  graphBarrasDiv.hidden = true;
  graphSectorDiv.hidden = false;
  graphSunburstDiv.hidden = true;
  graphButtonsDiv.hidden = false;
  graphButtonsLimitsDiv.hidden = false;
  sunburstButtonsDiv.hidden = true;
  graphHexbinDiv.hidden = true;
  hexbinButtonsDiv.hidden = true;
}  else if (graph == 3) { // Hexbin
  graphBarrasDiv.hidden = true;
  graphSectorDiv.hidden = true;
  graphSunburstDiv.hidden = true;
  graphButtonsDiv.hidden = false;
  graphButtonsLimitsDiv.hidden = true;
  sunburstButtonsDiv.hidden = true;
  graphHexbinDiv.hidden = false;
  hexbinButtonsDiv.hidden = false;
}   else if (graph == 4) { // Zoomable Sunburst
  graphBarrasDiv.hidden = true;
  graphSectorDiv.hidden = true;
  graphSunburstDiv.hidden = false;
  graphButtonsDiv.hidden = true;
  graphButtonsLimitsDiv.hidden = true;
  sunburstButtonsDiv.hidden = false;
  hexbinButtonsDiv.hidden = true;
}
return {graphBarrasDiv,graphSectorDiv,graphSunburstDiv,graphButtonsDiv,graphButtonsLimitsDiv,sunburstButtonsDiv,graphHexbinDiv,hexbinButtonsDiv};
}});

define({id: "c821672a", inputs: ["keys","keysTypes","Inputs","Generators","archivo"], outputs: ["keysText","keysNumber","selectorIdInput","selectorId","selectorVsInput","selectorVs","limitVsInput","limitVs","limitSbInput","limitSb","ordenarVsInput","ordenarVs","selectorRadioInput","selectorRadio"], body: (keys,keysTypes,Inputs,Generators,archivo) => {
// Keys divididas por tipo
const keysText = [];
const keysNumber = [];

keys.forEach((item, i) => {
  if(keysTypes[i] == "text") {
    keysText.push(item);
  } else if(keysTypes[i] == "number") {
    keysNumber.push(item);
  }
});

// Selector de identificador
const selectorIdInput = Inputs.select(keysText, {label: "Selecciona identificador"});
const selectorId = Generators.input(selectorIdInput);

// Selector de columna
const selectorVsInput = Inputs.select(keysNumber, {label: "Selecciona columna"});
const selectorVs = Generators.input(selectorVsInput);

// Limitador de datos
const limitVsInput = Inputs.range([1, archivo.length], {step: 1, label: "Límite de elementos"});
const limitVs = Generators.input(limitVsInput);

// Limitador Sunburst
const limitSbInput = Inputs.range([1, 50], {step: 1, label: "Límite de elementos"});
const limitSb = Generators.input(limitSbInput);

// Ordenar por id/dato
const ordenarVsInput = Inputs.select(["Identificador", "Valor"], {label: "Ordenar por"});
const ordenarVs = Generators.input(ordenarVsInput);

// Selector Radio
const selectorRadioInput = Inputs.range([2, 20], {step: 1, label: "Radio"});
const selectorRadio = Generators.input(selectorRadioInput);
return {keysText,keysNumber,selectorIdInput,selectorId,selectorVsInput,selectorVs,limitVsInput,limitVs,limitSbInput,limitSb,ordenarVsInput,ordenarVs,selectorRadioInput,selectorRadio};
}});

define({id: "e2fb3f6a", inputs: ["keysText","keysNumber","graphBarrasDiv","graphInput","archivo","limitVs","selectorId","structuredClone","d3","ordenarVs","selectorVs"], body: (keysText,keysNumber,graphBarrasDiv,graphInput,archivo,limitVs,selectorId,structuredClone,d3,ordenarVs,selectorVs) => {
if(keysText.length === 0 || keysNumber.length === 0) {
  graphBarrasDiv.innerHTML = "<div class=\"caution\">Los datos son incompatibles con este gráfico, por favor seleccione otro tipo de gráfico.</div>";
  graphInput[0].disabled = true;
} else {
  graphBarrasDiv.innerHTML = "";
  graphInput[0].disabled = false;

  // Datos
  const c_data = archivo.filter(function(d,i){
    return i < limitVs;
  });

  // Elige la key
  const c_key = selectorId;

  // Agrupar por identificador
  const c_grouped = [];
  c_data.forEach((item) => {
    var groupedO = c_grouped.find(o => { return o[c_key] == item[c_key]});
    if (groupedO != undefined) {
      keysNumber.forEach((key) => {
        let num = Number(groupedO[key]) + Number(item[key])
        groupedO[key] = num.toString();
      });
    } else {
      c_grouped.push(structuredClone(item));
    }
  });

  // Dimensiones
  const c_width = Math.max(200, [...new Set(c_grouped.map(item => item[c_key]))].length * 30),
        c_height = 600,
        c_marginTop = 20,
        c_marginRight = 0,
        c_marginBottom = 70,
        c_marginLeft = 70;

  // Escala X
  const c_x = d3.scaleBand();

  if(ordenarVs == "Identificador") { // Ordenado por id
    c_x.domain(d3.groupSort(c_grouped, ([d]) => -d[c_key], (d) => d[c_key]))
      .range([c_marginLeft, c_width - c_marginRight])
      .padding(0.1);
  } else if(ordenarVs == "Valor") { // Ordenado por valor
    c_x.domain(d3.groupSort(c_grouped, ([d]) => -d[selectorVs], (d) => d[c_key]))
      .range([c_marginLeft, c_width - c_marginRight])
      .padding(0.1);
  }  

  // Escala Y
  const c_y = d3.scaleLinear()
    .domain([0, d3.max(c_grouped, function(d) { return +d[selectorVs]; })])
    .range([c_height - c_marginBottom, c_marginTop]);

  const c_yAxis = d3.axisLeft(c_y)
    .ticks(10)
    .tickSize(0);

  // Borra gráfico anterior (si existe)
  let barrasAnt = document.getElementById('barras');
  if (barrasAnt != null) {
    barrasAnt.remove();
  }

  // SVG
  const c_svg = d3.select('#graphBarras').append('svg')
    .attr('id', 'barras')
    .attr('width', c_width)
    .attr('height', c_height)
    .attr('viewbox', [0, 0, c_width, c_height]);

  // Malla
  c_svg.selectAll('line.horizontal-grid')
    .data(c_y.ticks(10))
    .enter()
    .append('line')
    .attr('class', 'horizontal-grid')
    .attr('x1', c_marginLeft)
    .attr('y1', (d) => { return c_y(d); })
    .attr('x2', c_width)
    .attr('y2', (d) => { return c_y(d); })
    .style('stroke', 'gray')
    .style('stroke-width', 0.5)
    .style('stroke-dasharray', '3 3');

  // Barras
  c_svg.append('g')
    .attr('fill', 'steelblue')
    .selectAll()
    .data(c_grouped)
    .join('rect')
      .attr('x', (d) => c_x(d[c_key]))
      .attr('y', (d) => c_y(d[selectorVs]))
      .attr('height', (d) => (c_height - c_marginBottom) - c_y(d[selectorVs]))
      .attr('width', c_x.bandwidth());

  // Eje X
  c_svg.append('g')
    .attr('transform', `translate(0,${c_height - c_marginBottom})`)
    .call(d3.axisBottom(c_x).tickSizeOuter(0))
    .selectAll('text')
      .attr('transform', 'translate(-10,0)rotate(-45)')
      .style('text-anchor', 'end');

  // Eje Y
  c_svg.append('g')
    .attr('transform', `translate(${c_marginLeft},0)`)
    .call(c_yAxis)
    .call(g => g.select('.domain').remove())
    .call(g => g.append('text')
      .attr('x', -c_marginLeft)
      .attr('y', 10)
      .attr('fill', 'currentColor')
      .attr('text-anchor', 'start')
      .text('↑ ' + selectorVs));
}
}});

define({id: "4569e212", inputs: ["keysText","keysNumber","graphSectorDiv","graphInput","archivo","limitVs","selectorId","structuredClone","ordenarVs","d3","selectorVs"], body: (keysText,keysNumber,graphSectorDiv,graphInput,archivo,limitVs,selectorId,structuredClone,ordenarVs,d3,selectorVs) => {
if(keysText.length === 0 || keysNumber.length === 0) {
  graphSectorDiv.innerHTML = "<div class=\"caution\">Los datos son incompatibles con este gráfico, por favor seleccione otro tipo de gráfico.</div>";
  graphInput[1].disabled = true;
} else {
  graphSectorDiv.innerHTML = "";
  graphInput[1].disabled = false;

  // Dimensiones
  const tt_margin = 20,
      tt_width = 900,
      tt_height = 900,
      tt_radius = Math.min(tt_width, tt_height) / 2 - tt_margin;

  // Datos
  const tt_data = archivo.filter(function(d,i){
    return i < limitVs;
  });

  // Key para identificar elementos
  const tt_key = selectorId;

  // Agrupar por identificador
  const tt_grouped = [];
  tt_data.forEach((item) => {
    var groupedO = tt_grouped.find(o => { return o[tt_key] == item[tt_key]});
    if (groupedO != undefined) {
      keysNumber.forEach((key) => {
        let num = Number(groupedO[key]) + Number(item[key])
        groupedO[key] = num.toString();
      });
    } else {
      tt_grouped.push(structuredClone(item));
    }
  });

  // Ordenar conjunto
  if(ordenarVs == "Identificador") { // Por id
    tt_grouped.sort((a, b) => d3.ascending(a[tt_key], b[tt_key]));
  } else if(ordenarVs == "Valor") { // Por valor
    tt_grouped.sort(function(a, b) { return (b[selectorVs] - a[selectorVs]); });
  }

  // Paleta de colores
  const tt_color = d3.scaleOrdinal(d3.quantize(d3.interpolateRainbow, [...new Set(tt_grouped.map(item => item[selectorVs]))].length + 1));

  // Layout del gráfico
  const tt_pie = d3.pie()
    .sort(null)
    .value(d => d[selectorVs]);

  // Generador de arcos
  const tt_arc = d3.arc()
    .innerRadius(0)
    .outerRadius(tt_radius * 0.8);

  // Arcos para el ratón
  const tt_hoverArc = d3.arc()
    .innerRadius(0)
    .outerRadius(tt_radius);

  // Borra gráfico anterior (si existe)
  let sectorAnt = document.getElementById('sector');
  if (sectorAnt != null) {
    sectorAnt.remove();
  }

  // SVG
  const tt_svg = d3.select('#graphSector').append('svg')
    .attr('id', 'sector')
    .attr('width', tt_width)
    .attr('height', tt_height)
    .attr('style', 'font: 14px sans-serif;')
    .attr('viewBox', [-tt_width / 2, -tt_height / 2, tt_width, tt_height]);

  // Tooltip
  var tt_hoverDiv = d3.select('#graphSector').append('div')
    .attr('class', 'tooltip-donut')
    .style('opacity', 0);

  // Sectores
  const tt_g = tt_svg.selectAll('.arc')
    .data(tt_pie(tt_grouped))
    .enter().append('g')
    .attr('class', 'arc');

  tt_g.append('path')
    .attr('d', tt_arc)
    .attr('class', 'arc')
    .style('fill', (d, i) => tt_color(i))
    .style('fill-opacity', 0.8)
    .style('stroke', 'black')
    .style('stroke-width', 1)
    .on('mouseover', function (d, i) { // Ratón encima del sector
      // Resaltar sector
      d3.select(this)
        .style('fill-opacity', 1)
        .transition().duration(500)
        .attr('d', tt_hoverArc);
      // Mostrar tooltip
      tt_hoverDiv.transition()
        .duration(50)
        .style('opacity', 1);
      // Texto
      let label = tt_grouped.find(x => x[selectorVs] === (i.value).toString())[tt_key] + ': ' + i.value;
      tt_hoverDiv.html(label)
        // Coordenadas
        .style('left', (d3.pointer(d)[0] + document.getElementById('graphSector').getBoundingClientRect().x) + 150 + 'px')
        .style('top', (d3.pointer(d)[1] + document.getElementById('graphSector').getBoundingClientRect().x) + 175 + 'px');
    })
    .on('mouseout', function (d, i) { // Ratón sale del sector
      // Volver sector a la normalidad
      d3.select(this)
        .style('fill-opacity', 0.8)
        .transition().duration(500)
        .attr('d', tt_arc);
      // Ocultar tooltip
      tt_hoverDiv.transition()
        .duration(50)
        .style('opacity', 0);
    });
}
}});

define({id: "e020330b", inputs: ["keysText","keysNumber","graphHexbinDiv","graphInput","archivo","limitVs","d3","selectorId","selectorVs","selectorRadio"], outputs: ["d3hexbin"], body: async (keysText,keysNumber,graphHexbinDiv,graphInput,archivo,limitVs,d3,selectorId,selectorVs,selectorRadio) => {
const d3hexbin = await import("./_node/d3-hexbin@0.2.2/index.js");

if(keysText.length === 0 || keysNumber.length === 0) {
  graphHexbinDiv.innerHTML = "<div class=\"caution\">Los datos son incompatibles con este gráfico, por favor seleccione otro tipo de gráfico.</div>";
  graphInput[2].disabled = true;
} else {
  graphHexbinDiv.innerHTML = "";
  graphInput[2].disabled = false;

  // Dimensiones
  const hb_width = 650;
  const hb_height = hb_width;
  const hb_marginTop = 20;
  const hb_marginRight = 20;
  const hb_marginBottom = 30;
  const hb_marginLeft = 40;

  // Datos
  const hb_data = archivo.filter(function(d,i){
    return i < limitVs;
  });

  // Escala X
  const hb_x = d3.scaleBand()
    .domain(d3.groupSort(hb_data, ([d]) => -d[selectorId], (d) => d[selectorId]))
    .range([hb_marginLeft, hb_width - hb_marginRight]);

  // Escala Y
  const hb_y = d3.scaleLinear()
    .domain([0, d3.max(hb_data, function(d) { return +d[selectorVs]; })])
    .rangeRound([hb_height - hb_marginBottom, hb_marginTop]);

  // Clasificación de datos
  const hb_hexbin = d3hexbin.hexbin()
    .x(d => hb_x(d[selectorId]))
    .y(d => hb_y(d[selectorVs]))
    .radius(selectorRadio)
    .extent([[hb_marginLeft, hb_marginTop], [hb_width - hb_marginRight, hb_height - hb_marginBottom]]);

  const hb_bins = hb_hexbin(hb_data);

  // Escala de color
  const hb_color = d3.scaleSequential(d3.interpolateBuPu)
    .domain([0, d3.max(hb_bins, d => d.length) / 2]);

  // Borra gráfico anterior (si existe)
  let hexbinAnt = document.getElementById('hexbin');
  if (hexbinAnt != null) {
    hexbinAnt.remove();
  }

  // SVG
  const hb_svg = d3.select('#graphHexbin').append('svg')
    .attr('id', 'hexbin')
    .attr('viewBox', [0, 0, hb_width, hb_height]);

  // Eje X
  hb_svg.append('g')
      .attr('transform', `translate(0, ${hb_height - 10})`)
      .call(d3.axisBottom(hb_x).tickSizeOuter(0))
      .call(g => g.select('.domain').remove())
      .call(g => g.append('text')
          .attr('x', hb_width - hb_marginRight)
          .attr('y', -4)
          .attr('fill', 'currentColor')
          .attr('font-weight', 'bold')
          .attr('text-anchor', 'end')
          .text(selectorId));

  // Eje Y
  hb_svg.append('g')
      .attr('transform', `translate(${hb_marginLeft}, 0)`)
      .call(d3.axisLeft(hb_y).ticks(null, '.1s'))
      .call(g => g.select('.domain').remove())
      .call(g => g.append('text')
          .attr('x', 4)
          .attr('y', hb_marginTop)
          .attr('dy', '.75em')
          .attr('fill', 'currentColor')
          .attr('font-weight', 'bold')
          .attr('text-anchor', 'start')
          .text(selectorVs));

  // Hexágonos
  hb_svg.append('g')
      .attr('fill', '#ddd')
      .attr('stroke', 'black')
    .selectAll('path')
    .data(hb_bins)
    .enter().append('path')
      .attr('transform', d => `translate(${d.x},${d.y})`)
      .attr('d', hb_hexbin.hexagon())
      .attr('fill', bin => hb_color(bin.length));
}
return {d3hexbin};
}});

define({id: "714063c0", inputs: ["archivo","graphSunburstDiv","graphInput","structuredClone","limitSb","d3"], body: (archivo,graphSunburstDiv,graphInput,structuredClone,limitSb,d3) => {
if( archivo[0].children === undefined ) {
  graphSunburstDiv.innerHTML = "<div class=\"caution\">Los datos son incompatibles con este gráfico, por favor seleccione otro tipo de gráfico.</div>";
  graphInput[3].disabled = true;
} else{
  graphInput[3].disabled = false;
  graphSunburstDiv.innerHTML = "";

  // Datos
  var tempArchivo = structuredClone(archivo);
  var sb_data = limitData(tempArchivo[0], limitSb);

  // Dimensiones
  const ng_width = 950,
        ng_height = ng_width,
        ng_radius = ng_width / 6;

  // Paleta de colores
  const ng_color = d3.scaleOrdinal(d3.quantize(d3.interpolateRainbow, sb_data.children.length + 1));

  // Layout
  const ng_hierarchy = d3.hierarchy(sb_data)
      .sum(d => d.value)
      .sort((a, b) => b.value - a.value);
  const ng_root = d3.partition()
      .size([2 * Math.PI, ng_hierarchy.height + 1])
    (ng_hierarchy);
  ng_root.each(d => d.current = d);

  // Generador de arcos
  const ng_arc = d3.arc()
    .startAngle(d => d.x0)
    .endAngle(d => d.x1)
    .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))
    .padRadius(ng_radius * 1.5)
    .innerRadius(d => d.y0 * ng_radius)
    .outerRadius(d => Math.max(d.y0 * ng_radius, d.y1 * ng_radius - 1))

  // Borra gráfico anterior (si existe)
  let sunburstAnt = document.getElementById('sunburst');
  if (sunburstAnt != null) {
    sunburstAnt.remove();
  }

  // SVG
  const ng_svg = d3.select('#graphSunburst').append('svg')
    .attr('id', 'sunburst')
    .attr('viewBox', [-ng_width / 2, -ng_height / 2, ng_width, ng_width])
    .style('font', '10px sans-serif');

  // Arcos
  const ng_path = ng_svg.append('g')
    .selectAll('path')
    .data(ng_root.descendants().slice(1))
    .join('path')
      .attr('fill', d => { while (d.depth > 1) d = d.parent; return ng_color(d.data.name); })
      .attr('fill-opacity', d => arcVisible(d.current) ? (d.children ? 0.6 : 0.4) : 0)
      .attr('pointer-events', d => arcVisible(d.current) ? "auto" : "none")

      .attr('d', d => ng_arc(d.current));

  // Clickables si tienen hijos
  ng_path.filter(d => d.children)
      .style('cursor', 'pointer')
      .on('click', clicked);

  // Title
  const ng_format = d3.format(",d");
  ng_path.append('title')
      .text(d => `${d.ancestors().map(d => d.data.name).reverse().join("/")}\n${ng_format(d.value)}`);

  // Label
  const ng_label = ng_svg.append('g')
      .attr('pointer-events', 'none')
      .attr('text-anchor', 'middle')
      .style('user-select', 'none')
    .selectAll('text')
    .data(ng_root.descendants().slice(1))
    .join('text')
      .attr('dy', '0.35em')
      .attr('fill-opacity', d => +labelVisible(d.current))
      .attr('transform', d => labelTransform(d.current))
      .text(d => d.data.name);

  // Para eventos del ratón
  const ng_parent = ng_svg.append('circle')
      .datum(ng_root)
      .attr('r', ng_radius)
      .attr('fill', 'none')
      .attr('pointer-events', 'all')
      .on('click', clicked);

  // Zoom al clickar
  function clicked(event, p) {
    ng_parent.datum(p.parent || ng_root);

    ng_root.each(d => d.target = {
      x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,
      x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,
      y0: Math.max(0, d.y0 - p.depth),
      y1: Math.max(0, d.y1 - p.depth)
    });

    const t = ng_svg.transition().duration(750);

    ng_path.transition(t)
        .tween("data", d => {
          const i = d3.interpolate(d.current, d.target);
          return t => d.current = i(t);
        })
      .filter(function(d) {
        return +this.getAttribute("fill-opacity") || arcVisible(d.target);
      })
        .attr("fill-opacity", d => arcVisible(d.target) ? (d.children ? 0.6 : 0.4) : 0)
        .attr("pointer-events", d => arcVisible(d.target) ? "auto" : "none") 

        .attrTween("d", d => () => ng_arc(d.current));

    ng_label.filter(function(d) {
        return +this.getAttribute("fill-opacity") || labelVisible(d.target);
      }).transition(t)
        .attr("fill-opacity", d => +labelVisible(d.target))
        .attrTween("transform", d => () => labelTransform(d.current));
  }
    
  function arcVisible(d) {
    return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;
  }

  function labelVisible(d) {
    return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;
  }

  // Posición labels
  function labelTransform(d) {
    const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;
    const y = (d.y0 + d.y1) / 2 * ng_radius;
    return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;
  }

  // Limitar hijos
  function limitData(d, i) {
    if (d.hasOwnProperty('children')) {
      if(d.children.length > i) {
        d.children = d.children.slice(0, i);
      }
      d.children.forEach((e) => limitData(e, i));
      return d;
    }
    return d;
  }
}
}});

</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<style>

.hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: var(--sans-serif);
  margin: 4rem 0 8rem;
  text-wrap: balance;
  text-align: center;
}

.hero h1 {
  margin: 2rem 0;
  max-width: none;
  font-size: 14vw;
  font-weight: 900;
  line-height: 1;
  background: linear-gradient(30deg, var(--theme-foreground-focus), currentColor);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero h2 {
  margin: 0;
  max-width: 34em;
  font-size: 20px;
  font-style: initial;
  font-weight: 500;
  line-height: 1.5;
  color: var(--theme-foreground-muted);
}

@media (min-width: 640px) {
  .hero h1 {
    font-size: 90px;
  }
}

.scrollable-div {
  height: 350px;
  overflow-y: scroll;
}

div.tooltip-donut {
  position: absolute;
  text-align: center;
  padding: .5rem;
  background: #FFFFFF;
  color: #313639;
  border: 1px solid #313639;
  border-radius: 8px;
  pointer-events: none;
  font-size: 1.3rem;
}

table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  padding: 5px;
}

table {
  margin-left: auto;
  margin-right: auto;
}

th {
  background-color: gainsboro;
}

</style>
<div class="hero">
  <h1>CorpusLing</h1>
  <h2>TFG Grado en Ingeniería Informática</h2>
</div>
<!-- Botones pasos -->
<div id="cell-9b7a985f" class="observablehq observablehq--block"></div>
<div class="card">
  <span id="cell-00afe3dd"><span class="observablehq-loading"></span></span>
</div>
<!-- Procesamiento pasos -->
<div id="cell-294defac" class="observablehq observablehq--block"></div>
<!-- Botones carga de datos -->
<div id="cell-01e02363" class="observablehq observablehq--block"></div>
<div id="cell-8680e008" class="observablehq observablehq--block"></div>
<!-- Modo de carga -->
<div id="cell-b72ab29d" class="observablehq observablehq--block"></div>
<div id="paso1">
<div class="grid grid-cols-2">
  <div class="card"> <!-- Elegir modo -->
    <h1>Elige el modo de carga de datos</h1>
    <br>
    <span id="cell-dbeaed21"><span class="observablehq-loading"></span></span>
    <br>
    <div id="carga"></div>
    <div id="TSV">
      <span id="cell-f08ed483"><span class="observablehq-loading"></span></span>
    </div>
  </div>
  <div class="card" style="max-height: 350px;"> <!-- Visualización de datos -->
    <div id="muestraTSV" class="scrollable-div"></div>
  </div>
</div>
</div>
<div id="cell-14165f7b" class="observablehq observablehq--block"></div>
<div id="cell-7af89e89" class="observablehq observablehq--block"></div>
<div id="cell-31b3dab5" class="observablehq observablehq--block"></div>
<div id="cell-a084e6f6" class="observablehq observablehq--block"></div>
<!-- Verificación -->
<div id="paso2">
<div class="grid grid-cols-3">
  <div class="card" style="max-height: 100px;"> <!-- Título -->
    <h1>Comprueba que tus datos se ven bien</h1>
  </div>
  <div class="card" style="max-height: 100px;"> <!-- Botones -->
    <span id="cell-84f1f889"><span class="observablehq-loading"></span></span>
  </div>
  <div class="card" style="max-height: 100px;">
    <span id="cell-4a179013"><span class="observablehq-loading"></span></span>
  </div>
</div>
<div class="grid grid-cols-3">
  <div id="textoVf" class="card" style="max-height: 400px;"> <!-- Texto -->
    <p>
      Comprueba que tus datos se han procesado correctamente. En la tabla de la derecha puedes ver los 
      <span style="color: royalblue">números</span> 
      de color azul y el 
      <span style="color: seagreen">texto</span> 
      en verde. Una 
      <span style="color: darkred; background-color: lightpink">celda</span> 
      de color rojo indica que hay un dato que no se corresponde con la columna o que hay un problema con el conjunto de datos.
    </p>
    <p>
      Puedes editar el contenido de las celdas haciendo click en cada una de ellas, realiza todos los cambios que consideres antes de avanzar a la parte de visualización.
    </p>
  </div>
  <div id="editColVf" class="card" style="max-height: 400px;" hidden=""> <!-- Editar columna -->
    <h2>Editar columna</h2>
    <br>
    <span id="cell-bbefc0f9"><span class="observablehq-loading"></span></span>
    <br>
    <span id="cell-9e8ae319"><span class="observablehq-loading"></span></span>
  </div>
  <div class="card grid-colspan-2" style="max-height: 400px;"> <!-- Tabla -->
    <div id="tablaVf" class="scrollable-div"></div>
  </div>
</div>
</div>
<!-- Tabla -->
<div id="cell-0352ef6d" class="observablehq observablehq--block"></div>
<!-- Botones verificación -->
<div id="cell-e358c8f3" class="observablehq observablehq--block"></div>
<!-- Visualización -->
<div id="paso3">
  <div class="grid grid-cols-3">
    <div class="card"> <!-- Texto -->
      <h1>Elige el tipo de gráfico</h1>
      <br>
      <span id="cell-84ae4f69"><span class="observablehq-loading"></span></span>
    </div>
    <div class="card grid-colspan-2" style="max-height: 1400px;"> <!-- Gráfico -->
      <div id="graphButtons">
        <span id="cell-3a01cff3"><span class="observablehq-loading"></span></span>
        <span id="cell-742f3895"><span class="observablehq-loading"></span></span>
        <span id="cell-a5c43da8"><span class="observablehq-loading"></span></span>
      </div>
      <div id="graphButtonsLimits">
        <span id="cell-271693ac"><span class="observablehq-loading"></span></span>
      </div>
      <div id="graphBarras" style="overflow-y: scroll">
      </div>
      <div id="graphSector">
      </div>
      <div id="hexbinButtons">
        <span id="cell-59d44c5b"><span class="observablehq-loading"></span></span>
      </div>
      <div id="graphHexbin">
      </div>
      <div id="sunburstButtons">
        <span id="cell-5e9b754b"><span class="observablehq-loading"></span></span>
      </div>
      <div id="graphSunburst">
      </div>
    </div>
  </div>
</div>
<!-- Botones visualización -->
<div id="cell-539d631a" class="observablehq observablehq--block"></div>
<div id="cell-bb43cb29" class="observablehq observablehq--block"></div>
<!-- Elección gráfico -->
<div id="cell-4f515976" class="observablehq observablehq--block"></div>
<!-- Botones -->
<div id="cell-c821672a" class="observablehq observablehq--block"></div>
<!-- Gráfico de barras -->
<div id="cell-e2fb3f6a" class="observablehq observablehq--block"></div>
<!-- Diagrama de sectores -->
<div id="cell-4569e212" class="observablehq observablehq--block"></div>
<!-- Hexbin -->
<div id="cell-e020330b" class="observablehq observablehq--block"></div>
<!-- Zoomable sunburst -->
<div id="cell-714063c0" class="observablehq observablehq--block"></div>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-08-12T20:45:31">Aug 12, 2024</a>.</div>
</footer>
</div>
